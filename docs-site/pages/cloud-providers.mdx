# Cloud Providers

Configure cloud provider credentials in Settings to enable CloudFabric features.

## AWS

### Required Fields

| Field | Description |
|-------|-------------|
| Access Key ID | IAM user access key |
| Secret Access Key | IAM user secret key |
| Region | Default region (e.g., us-east-1) |
| Role ARN | Optional, for cross-account access |
| External ID | Optional, required with Role ARN |

### Permissions

For full functionality:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:*",
        "ec2:*",
        "cloudwatch:*",
        "ce:GetCostAndUsage",
        "ce:GetCostForecast",
        "cloudtrail:LookupEvents",
        "health:DescribeEvents",
        "cloudformation:*",
        "sts:GetCallerIdentity"
      ],
      "Resource": "*"
    }
  ]
}
```

### Cross-Account Access

If Role ARN and External ID are provided, CloudFabric uses `AssumeRole` to access resources in another AWS account.

## Google Cloud

### Required Fields

| Field | Description |
|-------|-------------|
| Project ID | GCP project identifier |
| Client Email | Service account email |
| Private Key | Service account private key (PEM format) |
| Region | Default region (e.g., us-central1) |

### JSON Key Paste

You can paste the entire service account JSON key file. The system auto-parses:
- `project_id`
- `client_email`
- `private_key`

### Creating a Service Account

1. Go to IAM & Admin → Service Accounts
2. Create new service account
3. Grant required roles (Storage Admin, Compute Admin, etc.)
4. Create JSON key
5. Download and paste into CloudFabric

## Azure

### Required Fields

| Field | Description |
|-------|-------------|
| Tenant ID | Azure AD directory ID |
| Client ID | App registration application ID |
| Client Secret | App registration secret |
| Subscription ID | Target subscription |
| Region | Default region (e.g., eastus) |

### App Registration Setup

1. Azure AD → App registrations → New
2. Create client secret
3. Assign Contributor role at subscription level

## Oracle Cloud

### Required Fields

| Field | Description |
|-------|-------------|
| Tenancy OCID | Tenancy identifier |
| User OCID | User identifier |
| Fingerprint | API key fingerprint |
| Private Key | API private key (PEM format) |
| Region | Default region (e.g., us-ashburn-1) |
| Compartment OCID | Default compartment |

### API Key Setup

1. User Settings → API Keys → Add API Key
2. Generate or upload public key
3. Download private key
4. Note the fingerprint

## Testing Connection

Click "Test Connection" after entering credentials. This calls the provider's identity API:
- AWS: `sts:GetCallerIdentity`
- GCP: Token validation
- Azure: Token validation
- Oracle: Identity API

## Credential Storage

All credentials are encrypted with AES-256-GCM before storage. The encryption key is derived from `NEXTAUTH_SECRET`.
